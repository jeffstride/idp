
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Case Study on Distance &#8212; IDP at NCHS</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=6c3db60c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script kind="utterances">

    var commentsRunWhenDOMLoaded = cb => {
    if (document.readyState != 'loading') {
        cb()
    } else if (document.addEventListener) {
        document.addEventListener('DOMContentLoaded', cb)
    } else {
        document.attachEvent('onreadystatechange', function() {
        if (document.readyState == 'complete') cb()
        })
    }
}

var addUtterances = () => {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "https://utteranc.es/client.js";
    script.async = "async";

    script.setAttribute("repo", "jeffstride/idp");
    script.setAttribute("issue-term", "pathname");
    script.setAttribute("theme", "preferred-color-scheme");
    script.setAttribute("label", "💬 Comments");
    script.setAttribute("crossorigin", "anonymous");

    sections = document.querySelectorAll("div.section");
    if (sections !== null) {
        section = sections[sections.length-1];
        section.appendChild(script);
    }
}
commentsRunWhenDOMLoaded(addUtterances);
</script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-DW6SHVPBYV"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-DW6SHVPBYV');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-DW6SHVPBYV');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'visualizations/case_study_dist';</script>
    <link rel="icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Curve of Best Fit" href="line_of_best_fit.html" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DW6SHVPBYV"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-DW6SHVPBYV');
    </script>


  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="IDP at NCHS - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="IDP at NCHS - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    <i class="fas fa-hand-sparkles fa-fw"></i> Introduction
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../homework-assignments/index.html"><i class="fas fa-book fa-fw"></i> Homework Assignments</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../homework-assignments/hw1.html"><i class="fas fa-laptop fa-fw"></i> HW1 - Startup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../homework-assignments/hw2.html"><i class="fas fa-laptop fa-fw"></i> HW2 - Primer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../homework-assignments/hw3.html"><i class="fas fa-laptop fa-fw"></i> HW3 - Pokémon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../homework-assignments/hw4.html"><i class="fas fa-laptop fa-fw"></i> HW4 - Education</a></li>
<li class="toctree-l2"><a class="reference internal" href="../homework-assignments/hw5.html"><i class="fas fa-laptop fa-fw"></i> HW5 - Search Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../homework-assignments/hw6.html"><i class="fas fa-laptop fa-fw"></i> HW6 - Spell Checker</a></li>


<li class="toctree-l2"><a class="reference internal" href="../homework-assignments/hw7.html"><i class="fas fa-laptop fa-fw"></i> HW7 - Mapping</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Topics/index.html"><i class="fas fa-layer-group fa-fw"></i> Topics</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Topics/misc/index.html"><i class="fas fa-book fa-fw"></i> Miscellaneous</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../Topics/misc/submitting.html">Submitting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/misc/collections.html">Collections</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/misc/comments.html">Writing Effective Comments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/misc/rand_response.html">Reversing Randomized Response</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/misc/my_st.html">Notes on MyST</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Topics/Replit/index.html"><i class="fas fa-book fa-fw"></i> Replit</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../Topics/Replit/building-in-replit.html">Building in Replit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/Replit/replit-tips.html">Replit Tips</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/Replit/corrupt-project.html">Corrupt Replit Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/Replit/flake8.html">Flake8</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Topics/pandas/index.html"><i class="fas fa-book fa-fw"></i> Pandas</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../Topics/pandas/dataframe.html">DataFrame</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/pandas/slicing-methods.html">DataFrame Slicing Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/pandas/mynb.html">Useful API</a></li>






</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Topics/machine_learning/index.html"><i class="fas fa-book fa-fw"></i> Machine Learning</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../Topics/machine_learning/feature-importance.html">Feature Importance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/machine_learning/assessing-accuracy.html">Assessing Accuracy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/machine_learning/classification.html">Classification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/machine_learning/regression.html">Regression - Distance Study</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/machine_learning/classifier-rand.html">Classification - Fully Random</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/machine_learning/when-to-avoid-ml.html">When to Avoid Using Machine Learning</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Topics/built-in/index.html"><i class="fas fa-book fa-fw"></i> Built-in</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../Topics/built-in/arguments.html">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/built-in/formatted-string.html">Formatted Strings</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../final-project/index.html"><i class="fas fa-layer-group fa-fw"></i> Final Project</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../final-project/handouts/index.html"><i class="fas fa-layer-group fa-fw"></i> Final Project Deliverables</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../final-project/handouts/discovery.html"><i class="fas fa-book fa-fw"></i> Discovery Document</a></li>
<li class="toctree-l3"><a class="reference internal" href="../final-project/handouts/organize.html"><i class="fas fa-book fa-fw"></i> Data Organization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../final-project/handouts/final.html"><i class="fas fa-book fa-fw"></i> Final Code and Report</a></li>
<li class="toctree-l3"><a class="reference internal" href="../final-project/handouts/presentation.html"><i class="fas fa-book fa-fw"></i> Final Presentation</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../final-project/tips/index.html"><i class="fas fa-layer-group fa-fw"></i> Final Project - Tips</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../final-project/tips/discovery.html"><i class="fas fa-book fa-fw"></i> Discovery Tips</a></li>
<li class="toctree-l3"><a class="reference internal" href="../final-project/tips/report.html"><i class="fas fa-book fa-fw"></i> Tips for Final Report</a></li>
<li class="toctree-l3"><a class="reference internal" href="../final-project/tips/presentation.html"><i class="fas fa-book fa-fw"></i> Tips for Final Presentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../final-project/tips/ML.html"><i class="fas fa-book fa-fw"></i> Leveraging ML</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html"><i class="fas fa-book fa-fw"></i> Visualizations</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="barchart.html">Bar Charts</a></li>
<li class="toctree-l2"><a class="reference internal" href="geospatial.html">Geospatial Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="lineplots.html">Line Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="line_of_best_fit.html">Curve of Best Fit</a></li>

<li class="toctree-l2 current active"><a class="current reference internal" href="#">Case Study on Distance</a></li>

</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/jeffstride/idp" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/jeffstride/idp/edit/main/book_source/visualizations/case_study_dist.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/jeffstride/idp/issues/new?title=Issue%20on%20page%20%2Fvisualizations/case_study_dist.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/visualizations/case_study_dist.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Case Study on Distance</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Case Study on Distance</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#background-of-hypothetical-project">Background of Hypothetical Project</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#worthless-graphs">Worthless Graphs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-by-gender">Data by Gender</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-by-sport">Data by Sport</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-by-age">Data by Age</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#examining-distance">Examining Distance</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#human-limits">Human Limits</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#machine-learning">Machine learning</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="case-study-on-distance">
<h1>Case Study on Distance<a class="headerlink" href="#case-study-on-distance" title="Link to this heading">#</a></h1>
<p>This page will present graphs for a ‘fake’ research project. It will show you both good graphs and bad graphs and a brief summary of what the graphs mean. It will provide the code used to generate the graphs as well a short discussion on the code: how the code works, why the code was selected, and potential pitfalls to watch out for when generating your own.</p>
<p>This exercise is intended to show how one can be <em>creative</em> in examining and visualizing data to surface true insights.</p>
<p>This exercise is <strong>NOT</strong> intended to show how to <em>clean</em> the data nor how to <em>test</em> the code.</p>
<div class="dropdown admonition">
<p class="admonition-title">See Imports</p>
<p>Here are the imports and Seaborn initialization used in the code on this page. Furthermore, the code herein does not include saving the image to a file. Because the code was developed in Jupyter Notebook, we include <code class="docutils literal notranslate"><span class="pre">%matplotlib</span> <span class="pre">inline</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.ticker</span> <span class="k">as</span> <span class="nn">mtick</span>

<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="kn">import</span> <span class="nn">scipy.integrate</span> <span class="k">as</span> <span class="nn">integrate</span>
<span class="kn">from</span> <span class="nn">scipy.optimize</span> <span class="kn">import</span> <span class="n">curve_fit</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>

<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

<span class="c1"># This if for Jupyter Notebook only</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
</pre></div>
</div>
</div>
<section id="background-of-hypothetical-project">
<h2>Background of Hypothetical Project<a class="headerlink" href="#background-of-hypothetical-project" title="Link to this heading">#</a></h2>
<p>This a hypothetical research project on <strong>contrived data</strong>. This dataset was <strong>created</strong> and is not real-life data. We pretend that this data was collected in the following hypothetical situation:</p>
<ul class="simple">
<li><p>A random set of people (18 or older) were asked to throw a baseball. The distance was measured.</p></li>
<li><p>The person gave their age and gender. For simplicity, only male/female genders were considered.</p></li>
<li><p>The person was allowed to select a <em>single</em> sport that they felt best represented their past (or present) athletic training. If a sport was selected, the person was supposed to have reached at least a high school varsity level in that selected sport.</p></li>
<li><p>The distance unit is yards. (but this metric is left out of all plots)</p></li>
</ul>
<p>A total of 1866 people’s responses were recorded.</p>
<p>Here is a sample of the data. These are the people with the top 10 and bottom 10 distance values:<br />
<img alt="Distance Data" src="../_images/distance_data.jpg" /></p>
<p>Note that our data is very “clean” and is not riddled with <code class="docutils literal notranslate"><span class="pre">NaN</span></code> or errors.</p>
</section>
<hr class="docutils" />
<section id="worthless-graphs">
<h2>Worthless Graphs<a class="headerlink" href="#worthless-graphs" title="Link to this heading">#</a></h2>
<p>Here are a set of common and essentially worthless graphs. A Final Report with only these plots in their report would be poor. These graphs are simple and not very insightful. Furthermore, one of the plots is mislabeled and misleading.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-0">
Average</label><div class="sd-tab-content docutils">
<p>The most common question would be to see the average distance thrown by gender. Here is the basic bar plot of that data. The small ‘tick’ or ‘bar’ at the top represents a range showing 95% confidence that the ‘true mean’ is within the range of the black bar. It assumes that the data we have is a sample from the true population and that it isn’t 100% representative. With the count of data points present, the bar represents with 95% confidence where would the mean actually fall in the true population.</p>
<p>Is the bar helpful? <a href="https://youtu.be/a2xZrXzuwyk" target="_blank">I think NOT!! (click for Video Reference)</a></p>
<p><img alt="bar chart" src="../_images/dist_bar_avg.jpg" /></p>
<p>The default is to have <code class="docutils literal notranslate"><span class="pre">ci=95</span></code> or not defined at all. What you see below is
‘sd’ (St. Dev) is much better because we are not so focused on our confidence in the average so much as the variance in the distance.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sns_bar_stats</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">ci</span><span class="p">):</span>
    <span class="c1"># display the line with something other than the default %95 confidence interval.</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;distance&#39;</span><span class="p">,</span> <span class="n">ci</span><span class="o">=</span><span class="n">ci</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Distance&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Average Distance&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-1">
Distance vs Sport</label><div class="sd-tab-content docutils">
<p>The idea was to show how each sport compares against other sport by showing how many people
were able to throw the ball at each specific distance. There are too many lines for one to make
much sense of anything. Furthermore, the x-axis is mislabeled! It presents itself as the distance
a person threw the ball, but in reality it represents a ‘bin’ (or a range of distances). There are
40 bins, each representing a range of 3. The graph makes it looks like the x-axis is the actual distance
thrown instead of a bin number.<br />
<img alt="bar chart" src="../_images/distance_v_sport_line.jpg" /></p>
<div class="dropdown admonition">
<p class="admonition-title">See Data and Code</p>
<p>To understand the code a bit better, let’s take a peek at what <code class="docutils literal notranslate"><span class="pre">df_buckets</span></code> looks like after it is created in the code below:<br />
<img alt="Bucket Data" src="../_images/dist_sport_hist_data.jpg" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sport_hist</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df_buckets</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="c1"># Define bin edges</span>
    <span class="n">bins</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">140</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">sports</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;sport&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
    <span class="c1"># remove &#39;None&#39; from the list of sports</span>
    <span class="n">sports</span> <span class="o">=</span> <span class="p">[</span> <span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sports</span> <span class="k">if</span> <span class="n">s</span> <span class="o">!=</span> <span class="s1">&#39;None&#39;</span><span class="p">]</span>
    
    <span class="k">for</span> <span class="n">sport</span> <span class="ow">in</span> <span class="n">sports</span><span class="p">:</span>
        <span class="c1"># get histogram values by having numpy put into bins for us</span>
        <span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;sport&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">sport</span><span class="p">][</span><span class="s1">&#39;distance&#39;</span><span class="p">]</span>
        <span class="n">bars</span><span class="p">,</span> <span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">)</span>
        <span class="n">df_buckets</span><span class="p">[</span><span class="n">sport</span><span class="p">]</span> <span class="o">=</span> <span class="n">bars</span>
    
    <span class="c1"># Set up plot</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_buckets</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distance vs Sport&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Distance&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Count&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<input id="sd-tab-item-2" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-2">
Gender w/ Sport &amp; Age</label><div class="sd-tab-content docutils">
<p>This plot isn’t <em>horrible</em> as it combines all three features into a single plot. The sports are identified by the color of the dots where we can clearly see that ‘None’ dominates the base of the plot. The age of the person is denoted by the size of the dots where it appears that the base of the plot is wider. If you squint, it kind of looks like two skinny spikes, sharper and redder at the top. It would mean that those who hadn’t done any sport at all and are older throw the shortest. Those who played baseball and are younger throw the farthest.</p>
<p>However, there are still many questions and issues. The spikes are far apart and don’t leverage the graphing space well. The colors are hard to discern from one another (e.g. perhaps XCountry folks throw the farthest). It doesn’t tell us how much farther one sport throws over another, the average distance, the variance, or many other interesting statistics about the data. The spikes are too skinner and compact to illucidate truly useful information.</p>
<p><img alt="Relplot by Gender, Sport and Age" src="../_images/dist_relplot_with_sport_age.jpg" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">scatter_plot</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Create a scatter plot by gender with sports in color, age in size.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">relplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;distance&#39;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;sport&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="s1">&#39;age&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distance versus Gender w/ Sport &amp; Age&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Distance&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-3" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-3">
Stacked Bars</label><div class="sd-tab-content docutils">
<p>This plot shows the count of people at various distances. We can see that the male gender has a curve that looks to be a ‘normal distribution’. Stacked on top of the male gender is the female gender. The stacking of the bars allows us to get an idea of the distribution of the entire sample set, but it doesn’t allow us to see how the female gender is distributed.<br />
<img alt="Stacked Bar Chart" src="../_images/dist_stacked_bars.jpg" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">stacked_hist</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">male_data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Male&#39;</span><span class="p">][</span><span class="s1">&#39;distance&#39;</span><span class="p">]</span>
    <span class="n">female_data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Female&#39;</span><span class="p">][</span><span class="s1">&#39;distance&#39;</span><span class="p">]</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">([</span><span class="n">male_data</span><span class="p">,</span> <span class="n">female_data</span><span class="p">],</span> <span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;barstacked&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;pink&#39;</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Distance&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Count&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Counts at Each Distance&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;Male&#39;</span><span class="p">,</span> <span class="s1">&#39;Female&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-4" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-4">
Sports Histogram</label><div class="sd-tab-content docutils">
<p>This plot turned out so bad that I didn’t even attempt to fix the fact that the x-axis labels are occluded, the y-axis ranges don’t match, the color of all the bars are blue (don’t differentiate themselves), and that there are gaps the bars. It is just ugly and upon first inspection, I knew that I didn’t want to go any further with this plot.
<img alt="Sport Histogram" src="../_images/dist_sport_hist.jpg" /></p>
<p>To get the bars to line up uniformly, we explicitly set the bins using <code class="docutils literal notranslate"><span class="pre">range(0,</span> <span class="pre">140,</span> <span class="pre">3)</span></code>.
We generated a new <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> called <code class="docutils literal notranslate"><span class="pre">df_buckets</span></code> and set the height of the bars to be the count of people
within that bin. This is done for us using <code class="docutils literal notranslate"><span class="pre">np.histogram</span></code>.  Then, we enumerated through each sport and
plotted a histogram. We set the y-axis label on each axis so that we’d know which sport that subplot
was presenting.</p>
<div class="dropdown admonition">
<p class="admonition-title">See Code</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sport_hist_by_sides</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df_buckets</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="c1"># Define bin edges</span>
    <span class="n">bins</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">140</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">sports</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;sport&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
    
    <span class="k">for</span> <span class="n">sport</span> <span class="ow">in</span> <span class="n">sports</span><span class="p">:</span>
        <span class="c1"># get histogram values by having numpy put into bins for us</span>
        <span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;sport&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">sport</span><span class="p">][</span><span class="s1">&#39;distance&#39;</span><span class="p">]</span>
        <span class="n">bars</span><span class="p">,</span> <span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">)</span>
        <span class="n">df_buckets</span><span class="p">[</span><span class="n">sport</span><span class="p">]</span> <span class="o">=</span> <span class="n">bars</span>
    
    <span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sports</span><span class="p">),</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">15</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">sport</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sports</span><span class="p">):</span>
        <span class="c1"># plot a sport histogram on each subplot</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;sport&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">sport</span><span class="p">]</span>
        <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;distance&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">sport</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="data-by-gender">
<h2>Data by Gender<a class="headerlink" href="#data-by-gender" title="Link to this heading">#</a></h2>
<p>It is always a good idea to get a firm idea of what the data comprises. In these next few plots we show how the data differs by gender.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-5" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-5">
Pie</label><div class="sd-tab-content docutils">
<p>The following pie chart shows us how many men and women there are. We can see that in this (fake) study, we had more men than women likely due to some bias in how the data was collected.</p>
<p><img alt="Gender Pie" src="../_images/dist_gender_pie.png" /></p>
<p>The code to generate this pie chart will was the same as the more complicated pie charts below. In short, it was:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Calculate the percentages of each gender</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="n">percentages</span> <span class="o">=</span> <span class="n">counts</span> <span class="o">/</span> <span class="n">counts</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">percentages</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">percentages</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">autopct</span><span class="o">=</span><span class="k">lambda</span> <span class="n">pct</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">pct</span><span class="si">:</span><span class="s1">.1f</span><span class="si">}</span><span class="s1">%&#39;</span><span class="p">,</span> <span class="n">startangle</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-6" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-6">
Average</label><div class="sd-tab-content docutils">
<p>As stated above, the most common question would be to see the average distance thrown by gender. Here we show the average along with the Standard Deviation in the data. The bar is relatively long showing that there is a good amount of variance in the data.</p>
<p><img alt="bar chart of avgerage distance by gender" src="../_images/dist_bar_sd.jpg" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># code snippet (see &#39;Average&#39; tab above for more code)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;distance&#39;</span><span class="p">,</span> <span class="n">ci</span><span class="o">=</span><span class="s1">&#39;sd&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-7" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-7">
Histogram</label><div class="sd-tab-content docutils">
<p>In this histogram plot we have each gender plotted, female on top of male using a transparency (<code class="docutils literal notranslate"><span class="pre">alpha=0.7</span></code>). The transparency allows us to see both sets of bars, layered on top of one another, and that there is a ‘normal distribution’ for both genders. In this code, we explicitly set the boundaries of the bins so that we could easily know that the bin sizes were 10. Alternatively, we could have set the count of bins. However, setting the count of bins made it such that the female bin sizes were different because of the overall range being different. Setting the bin boundaries allows for the bars to line up nicely.</p>
<p>The chart reveals that women are mostly likely to throw between 20-30 yards while men are most likely to throw between 40-50 yards. Also, women peak out at about 80 yards while men peak out around 110 with what appears to be an outlier(s) beyond 120 yards.</p>
<p><img alt="Histogram" src="../_images/dist_hist_mvf.jpg" /></p>
<div class="dropdown admonition">
<p class="admonition-title">See Code</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">simple_hist</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">male_data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Male&#39;</span><span class="p">][</span><span class="s1">&#39;distance&#39;</span><span class="p">]</span>
    <span class="n">female_data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Female&#39;</span><span class="p">][</span><span class="s1">&#39;distance&#39;</span><span class="p">]</span>

    <span class="c1"># Set up plot</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

    <span class="c1"># Define bin edges</span>
    <span class="n">bins</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">140</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

    <span class="c1"># Plot histogram for males</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">male_data</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Male&#39;</span><span class="p">)</span>

    <span class="c1"># Plot histogram for females</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">female_data</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;pink&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Female&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Distance&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Count&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distance Histogram by Gender&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<input id="sd-tab-item-8" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-8">
Swarm</label><div class="sd-tab-content docutils">
<p>This plot provides a nice visual into the distribution of distance by gender. It gives more detail into how many people are at various distances. It reveals that men have a much broader spread of distances.
<img alt="Swarm Plot" src="../_images/dist_swarm.jpg" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">swarm_plot</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;sport&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;None&#39;</span><span class="p">]</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">catplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;distance&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;swarm&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Distance&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Swarm Plot of Distance by Gender&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="data-by-sport">
<h2>Data by Sport<a class="headerlink" href="#data-by-sport" title="Link to this heading">#</a></h2>
<p>Let’s see if we can learn how the sport impacts the distance thrown. We already saw that a line plot was horrible. However, when examining the data by gender, we saw that a histogram provided some decent data, while a swarm plot was better. Attempts at these two plots showed that we needed to do even better. And, so we moved onto the better option, a box plot.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-9" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-9">
Pie Chart</label><div class="sd-tab-content docutils">
<p>This pie chart shows how the sports compose both the male and female genres. We can see that more women do not affiliate with any sport at all, and that women are not a part of football.
<img alt="Sport Pie Chart by Gender" src="../_images/dist_pie_sport_both.png" /></p>
<div class="dropdown admonition">
<p class="admonition-title">See Code</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">plot_pie</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">col_name</span><span class="p">,</span> <span class="n">display_name</span><span class="p">):</span>
    <span class="c1"># Calculate the percentages of each category</span>
    <span class="n">counts</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col_name</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
    <span class="n">percentages</span> <span class="o">=</span> <span class="n">counts</span> <span class="o">/</span> <span class="n">counts</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span>
   
    <span class="n">label_threshold</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="c1"># Define the autopct formatting function</span>
    <span class="k">def</span> <span class="nf">autopct_format</span><span class="p">(</span><span class="n">pct</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">pct</span><span class="si">:</span><span class="s1">.1f</span><span class="si">}</span><span class="s1">%&#39;</span> <span class="k">if</span> <span class="n">pct</span> <span class="o">&gt;=</span> <span class="n">label_threshold</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>

    <span class="c1"># Create a list of labels based on the threshold</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span> <span class="k">if</span> <span class="n">percentages</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">label_threshold</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">percentages</span><span class="o">.</span><span class="n">index</span><span class="p">]</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">percentages</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span> <span class="n">autopct</span><span class="o">=</span><span class="n">autopct_format</span><span class="p">,</span> <span class="n">startangle</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Percentage Makeup of &#39;</span> <span class="o">+</span> <span class="n">display_name</span><span class="p">)</span>
    
    <span class="c1"># Identify sports for the table that were not annotated</span>
    <span class="n">not_annotated</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">percentages</span><span class="o">.</span><span class="n">index</span> <span class="k">if</span> <span class="n">percentages</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">label_threshold</span><span class="p">]</span>

    <span class="c1"># Create a table for not annotated sports</span>
    <span class="k">if</span> <span class="n">not_annotated</span><span class="p">:</span>
        <span class="n">table_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="n">display_name</span><span class="p">:</span> <span class="n">not_annotated</span><span class="p">,</span> <span class="s1">&#39;Percentage&#39;</span><span class="p">:</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">percentages</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="si">:</span><span class="s1">.1f</span><span class="si">}</span><span class="s1">%&#39;</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">not_annotated</span><span class="p">]})</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">cellText</span><span class="o">=</span><span class="n">table_data</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">colLabels</span><span class="o">=</span><span class="n">table_data</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">cellLoc</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">.75</span><span class="p">,</span> <span class="mf">.4</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">])</span>
        <span class="n">table</span><span class="o">.</span><span class="n">auto_set_font_size</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">set_fontsize</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">)</span>
        
<span class="k">def</span> <span class="nf">plot_pie_by_side</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
    <span class="n">plot_pie</span><span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Female&#39;</span><span class="p">],</span> <span class="s1">&#39;sport&#39;</span><span class="p">,</span> <span class="s1">&#39;Sport (F)&#39;</span><span class="p">)</span>
    <span class="n">plot_pie</span><span class="p">(</span><span class="n">ax2</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Male&#39;</span><span class="p">],</span> <span class="s1">&#39;sport&#39;</span><span class="p">,</span> <span class="s1">&#39;Sport (M)&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<input id="sd-tab-item-10" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-10">
Swarm Plot</label><div class="sd-tab-content docutils">
<p>The swarm plot worked well for genders, let’s try another one get get an understanding of Distance thrown by Sport. It is a little disappointing because the points are too uniform in their distribution and I don’t come away feeling like I got any answers.</p>
<p><img alt="Sport Box Plot" src="../_images/dist_swarm_sport.png" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">swarm_sport_plot</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="c1"># setting the figure size in Seaborn catplot requires used of height and aspect</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">catplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;sport&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;distance&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;swarm&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mf">1.5</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=-</span><span class="mi">60</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Distance&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Swarm Plot of Distance by Sport&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-11" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-11">
Distance Box Plot</label><div class="sd-tab-content docutils">
<p>Since I wanted to get some statistical insight into each sport, I decided to go with a boxplot. In this chart, sorted by average distance thrown, we can see that the sport Baseball has clear advantage over the rest, while No sport has a clear disadvantage. While Basketball appears to have a shorter average throwing distance than Hockey and Golf, there is a lot of variance to allow many basketball players to throw farther than most hockey players and golfers. When we look at the Age Box Plot showing Age Distribution by Sport (in the next tab) we can see that golfers had a much lower average age which likely gave them an advantage.</p>
<p><img alt="Sport Box Plot" src="../_images/dist_sport_boxplot.jpg" /></p>
<div class="admonition-note admonition">
<p class="admonition-title">Note</p>
<p>Code for this Distance Box Plot can be seen in the next tab, Age Box Plot.</p>
<div class="dropdown admonition">
<p class="admonition-title">Box Plot Explanation</p>
<p>In a boxplot, the box represents the interquartile range (IQR) of the data, which is a measure of statistical dispersion. The box spans the range between the first quartile (Q1) and the third quartile (Q3) of the data. The line inside the box represents the median (Q2), which is the value that divides the data into two equal halves.</p>
<p>The length of the box gives an indication of the spread of the middle 50% of the data. A longer box indicates a larger range between the first quartile and the third quartile, suggesting greater variability in the data.</p>
<p>The bars extending from the box are called whiskers. The whiskers represent the range of the data, excluding any outliers. The length of the whiskers can vary depending on how outliers are defined and displayed in the plot. The whiskers can extend to a maximum of 1.5 times the IQR from the box.</p>
<p>Any data points outside the whiskers are considered outliers and are plotted as individual points. Outliers are typically displayed as dots or small markers on the plot and can provide insights into extreme or unusual observations in the data.</p>
<p>Some boxplots may also include additional elements, such as notches or confidence intervals, which provide additional information about the uncertainty or variability in the data.</p>
<p>Overall, boxplots provide a compact visualization of the distribution of a dataset, including measures of central tendency (median) and dispersion (IQR), as well as potential outliers. They are useful for comparing distributions, identifying skewness, detecting outliers, and gaining an overall understanding of the spread and shape of the data.</p>
</div>
</div>
</div>
<input id="sd-tab-item-12" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-12">
Age Box Plot</label><div class="sd-tab-content docutils">
<p>In this plot, we see how the distribution of ages was not the same across each sport. This contributes to the distance of the throwers in a particular sport. We will first show that <code class="docutils literal notranslate"><span class="pre">age</span></code> correlates to <code class="docutils literal notranslate"><span class="pre">distance</span></code> below.</p>
<p><img alt="Age Box Plot" src="../_images/dist_age_by_sport.png" /></p>
<div class="dropdown admonition">
<p class="admonition-title">See Code</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">boxes_for_sports</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    In this method, we get the mean distance for each sport so that we can sort the</span>
<span class="sd">    dataframe by the mean distance. </span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="c1"># we probably could have done something similar with a pivot table, but that would</span>
    <span class="c1"># have left out the statistical, distribution information</span>
    <span class="c1"># pivot_table = df.pivot_table(index=&#39;gender&#39;, columns=&#39;sport&#39;, values=&#39;distance&#39;, aggfunc=&#39;mean&#39;)</span>
    
    <span class="n">sports</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;sport&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
    
    <span class="c1"># Calculate the average distance for each sport</span>
    <span class="c1"># keep original index to make it easy to merge on sport</span>
    <span class="n">average_distance</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;sport&#39;</span><span class="p">)[</span><span class="s1">&#39;distance&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

    <span class="c1"># add/merge the average_distance values back into the original dataset</span>
    <span class="n">sorted_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">average_distance</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s1">&#39;sport&#39;</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="s1">&#39;sport&#39;</span><span class="p">)</span>
    
    <span class="c1"># Sort the DataFrame based on average distance in ascending order</span>
    <span class="c1"># Both dataframes had &#39;distance&#39; so there is now &#39;distance_x&#39; = original</span>
    <span class="c1"># and &#39;distance_y&#39; which is the mean.</span>
    <span class="n">sorted_df</span> <span class="o">=</span> <span class="n">sorted_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;distance_y&#39;</span><span class="p">)</span>

    <span class="c1"># Create the boxplot using the new sorted DataFrame</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">sorted_df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;distance_x&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;sport&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution by Sport&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Distance&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">boxes_for_sports_age</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>   
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;sport&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Age Distribution by Sport&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Age&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<input id="sd-tab-item-13" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-13">
Area Plots</label><div class="sd-tab-content docutils">
<p>Below you’ll see two plots. First is an Area Plot that shows the count of people in each sport. You’ll see that there is a big hump around 20-30 yards because that is the distance that most people can throw. The primary “sport” contributing to that distance is “None”, but that is the largest contributor overall. As the distance grows out farther, it become more difficult to differentiate between the sports because are simply too few people at those great distances.</p>
<p><img alt="Sport Area" src="../_images/dist_sport_area.png" /></p>
<p>While the above plot provides good information, it begs a question: What <strong>percentage</strong> does each sport contribute at each distance?  Creating a graph to answer that question took some creativity and some coding effort to <em>organize the data</em>. Essentially, we created a dataframe that represented the percentage of people representing a specific distance for each sport.</p>
<p><img alt="Sport Area by Percent" src="../_images/dist_sport_area_perc.png" /></p>
<div class="admonition-note admonition">
<p class="admonition-title">note</p>
<p>If you want to see the intermediate DataFrames and the code to create the above plots, well… I’m not sharing that exactly. <strong>BUT</strong>, you can see virtually the same thing in the section below, “Data by Age” in the <em>Area of Percent</em> tab. Check it out!</p>
</div>
</div>
</div>
</section>
<section id="data-by-age">
<h2>Data by Age<a class="headerlink" href="#data-by-age" title="Link to this heading">#</a></h2>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-14" name="sd-tab-set-3" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-14">
Pie Chart</label><div class="sd-tab-content docutils">
<p>The largest age groups happen to be: 38-47, then 28-37, followed by 18-27. It appears that there is a bias in the data which could skew the
results of the research. Given that we will soon see that younger people throw a bit farther on average, that
having our data skewed a bit older makes the results less accurate overall. The number of people in the general population should get
smaller as the ages go up, and surely this distribution by age does not match what we expect. This triggered another plot (Actual vs Sample)
to examine more closely the age distribution relative to the actual population.</p>
<p><img alt="Age Pie" src="../_images/dist_pie_age.png" /></p>
<div class="dropdown admonition">
<p class="admonition-title">See Code</p>
<p>See the code for the <code class="docutils literal notranslate"><span class="pre">plot_pie</span></code> method in the section above “Data By Sport -&gt; Pie Chart”.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pie_by_age</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="c1"># add an age bracket to a copy of the DF</span>
    <span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">bracket_names</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;-&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">9</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">81</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="p">]</span>
    <span class="n">bracket_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;88-99&#39;</span><span class="p">)</span>
    <span class="n">age_bracket</span> <span class="o">=</span> <span class="p">[</span> <span class="n">bracket_names</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">age</span> <span class="o">&gt;</span> <span class="mi">87</span> <span class="k">else</span> <span class="n">bracket_names</span><span class="p">[(</span><span class="n">age</span><span class="o">-</span><span class="mi">18</span><span class="p">)</span><span class="o">//</span><span class="mi">10</span><span class="p">]</span> <span class="k">for</span> <span class="n">age</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span> <span class="p">]</span>
    <span class="n">df2</span><span class="p">[</span><span class="s1">&#39;age_bracket&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">age_bracket</span>
    <span class="n">df2</span> <span class="o">=</span> <span class="n">df2</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;age_bracket&#39;</span><span class="p">)</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">plot_pie</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">df2</span><span class="p">,</span> <span class="s1">&#39;age_bracket&#39;</span><span class="p">,</span> <span class="s1">&#39;Age Bracket&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<input id="sd-tab-item-15" name="sd-tab-set-3" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-15">
Actual vs Sample</label><div class="sd-tab-content docutils">
<p>I went <a class="reference external" href="https://www2.census.gov/programs-surveys/popest/tables/2020-2022/national/asrh/nc-est2022-syasexn.xlsx">here</a> to
get data on the US Population in 2022 by age (by single year). I did a little work in Excel to change the count to
percentages between 18-99 (inclusive). The percentage represents the percent at age X of all people between 18-99. In other
words, I excluded those 0-17 and 100+.
Then, I generated the plots below. The red line represent the actual US population and the blue histogram is our study data.
I considered doing adding a regression line (with order=2, or a parabola) to see how our
sample data would curve, but I thought the plots were busy enough and it additional line wouldn’t add much value.</p>
<p>We can see that the age distribution is pretty close to the general population except for those in the 38-47 age bracket. It also
looks like we might have an under representation of the following age ranges: 21-23, 30-32, and 51-53.</p>
<p><img alt="Sample vs Actual" src="../_images/dist_age_study.png" /></p>
<div class="dropdown admonition">
<p class="admonition-title">See the Code</p>
<p>In the code below, <code class="docutils literal notranslate"><span class="pre">df</span></code> is our study data, while <code class="docutils literal notranslate"><span class="pre">df_us</span></code> is the actual population data with only two columns, ‘age’ and ‘percent’.
This code makes use of <code class="docutils literal notranslate"><span class="pre">twinx()</span></code> which allows us to plot two plots on the same x-axis where the y-values are at different scales.
Notice how there are two y-axis labels for each subplot.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add_age_bracket</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">bracket_names</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;-&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">9</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">81</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="p">]</span>
    <span class="n">bracket_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;88-99&#39;</span><span class="p">)</span>
    <span class="n">age_bracket</span> <span class="o">=</span> <span class="p">[</span> <span class="n">bracket_names</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">age</span> <span class="o">&gt;</span> <span class="mi">87</span> <span class="k">else</span> <span class="n">bracket_names</span><span class="p">[(</span><span class="n">age</span><span class="o">-</span><span class="mi">18</span><span class="p">)</span><span class="o">//</span><span class="mi">10</span><span class="p">]</span> <span class="k">for</span> <span class="n">age</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span> <span class="p">]</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;age_bracket&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">age_bracket</span>

<span class="k">def</span> <span class="nf">hist_line_ages</span><span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">df_us</span><span class="p">):</span>
    <span class="c1"># we have some outliers at: 25, 30, 35, etc.</span>
    <span class="c1"># so, use bins of size 3 to flatting things out a bit</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="p">(</span><span class="mi">99</span><span class="o">-</span><span class="mi">18</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">//</span><span class="mi">3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Study&#39;</span><span class="p">)</span>
    <span class="n">ax2</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">):</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_us</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">],</span> <span class="n">df_us</span><span class="p">[</span><span class="s1">&#39;percent&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Actual&#39;</span><span class="p">)</span>
    
    <span class="c1"># with a twinx(), the labels are separate. Let&#39;s combine them.</span>
    <span class="n">lines</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()</span>
    <span class="n">lines2</span><span class="p">,</span> <span class="n">labels2</span> <span class="o">=</span> <span class="n">ax2</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">lines</span> <span class="o">+</span> <span class="n">lines2</span><span class="p">,</span> <span class="n">labels</span> <span class="o">+</span> <span class="n">labels2</span><span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Age Histogram (3 Year Bins)&#39;</span><span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Age&#39;</span><span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Study Count&#39;</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;True Percent&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">compare_hist</span><span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">df_us</span><span class="p">):</span>
    <span class="n">add_age_bracket</span><span class="p">(</span><span class="n">df_us</span><span class="p">)</span>
    
    <span class="c1"># aggregate (sum up) values in age brackets</span>
    <span class="n">perc_series</span> <span class="o">=</span> <span class="n">df_us</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;age_bracket&#39;</span><span class="p">)[</span><span class="s1">&#39;percent&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    
    <span class="c1"># Set up plot</span>
    <span class="c1"># ax1.set_facecolor(&#39;lightgrey&#39;)</span>

    <span class="c1"># Plot histogram for study data, save the bins, and reindex the series to the bins</span>
    <span class="n">n</span><span class="p">,</span> <span class="n">bins</span><span class="p">,</span> <span class="n">patches</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Study&#39;</span><span class="p">)</span>
    <span class="c1"># have the series object with the same index values, but add 5 to center in the bar</span>
    <span class="n">perc_series</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">bins</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">5</span>
    
    <span class="c1"># Plot aggregated percentages of actual population</span>
    <span class="n">ax2</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">):</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">perc_series</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">perc_series</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="s1">&#39;r-&#39;</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;True Percent&#39;</span><span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Study Count&#39;</span><span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Age&#39;</span><span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="mi">18</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">38</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">68</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="mi">88</span> <span class="p">])</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Age Histogram (10 Year Bins)&#39;</span><span class="p">)</span>
    
<span class="k">def</span> <span class="nf">create_dual_hist_plots</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_us</span><span class="p">):</span>
    <span class="c1"># two, side-by-side plots</span>
    <span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax_left</span><span class="p">,</span> <span class="n">ax_right</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    
    <span class="c1"># On the left, create histogram &amp; line with only 3 ages combined</span>
    <span class="n">hist_line_ages</span><span class="p">(</span><span class="n">ax_left</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">df_us</span><span class="p">)</span>
    <span class="n">compare_hist</span><span class="p">(</span><span class="n">ax_right</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">df_us</span><span class="p">)</span>
    
    <span class="c1"># Add super title</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Actual vs Study Sample&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<input id="sd-tab-item-16" name="sd-tab-set-3" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-16">
Box Plot</label><div class="sd-tab-content docutils">
<p>Here we see that the younger you are, the farther you can throw. The one exception is in the 88-99 age bracket. There we see that they are a bit better than they 78-87 year olds. Even though the average is slightly greater than the 68-77 year-olds, the range is much smaller. This is probably due to the low numbers we have the higher age group and is an anomoly in the data.</p>
<p><img alt="Age Box Plot" src="../_images/dist_age_box_plots.png" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">boxes_by_age</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="c1"># add an age bracket to a copy of the DF</span>
    <span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">bracket_names</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;-&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">9</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">81</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="p">]</span>
    <span class="n">bracket_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;88-99&#39;</span><span class="p">)</span>
    <span class="n">age_bracket</span> <span class="o">=</span> <span class="p">[</span> <span class="n">bracket_names</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">age</span> <span class="o">&gt;</span> <span class="mi">87</span> <span class="k">else</span> <span class="n">bracket_names</span><span class="p">[(</span><span class="n">age</span><span class="o">-</span><span class="mi">18</span><span class="p">)</span><span class="o">//</span><span class="mi">10</span><span class="p">]</span> <span class="k">for</span> <span class="n">age</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span> <span class="p">]</span>
    <span class="n">df2</span><span class="p">[</span><span class="s1">&#39;age_bracket&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">age_bracket</span>
    <span class="n">df2</span><span class="p">[</span><span class="s1">&#39;age_bracket&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">age_bracket</span>
    <span class="n">df2</span> <span class="o">=</span> <span class="n">df2</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;age_bracket&#39;</span><span class="p">)</span>
    
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;distance&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;age_bracket&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution by Age&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Distance&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-17" name="sd-tab-set-3" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-17">
Area of Percent</label><div class="sd-tab-content docutils">
<p>This plot is starting to show a little more creativity. Notice a few things:</p>
<p>First, the y-label goes up to 1.0, which represent 100% of people at that distance. No matter what distance we look at, all the people there represent 100% of the people there. For example, even though at 120 yards there are only 2 people there, they make up 100% of the people there. At 110 yards, there is only one person who happens to be in the 18-27 year-old age-bracket, which is why the graph is entirely blue at 110 yards.</p>
<p>Secondly, the older participants make up a very small percentage of the people overall and they are virually gone at 70 yards (with just a few outliers). At very short distances, the majority of people there are 58 and older.</p>
<p><img alt="Area of age percentage at each distance" src="../_images/dist_age_area.png" /></p>
<div class="dropdown admonition">
<p class="admonition-title">See Code and Data</p>
<p>In the code below you’ll see that we create three different DataFrames:</p>
<ol class="arabic simple">
<li><p>A new dataframe, <code class="docutils literal notranslate"><span class="pre">df2</span></code>, that has Distance “bins” and Age-Brackets for each person. (not shown)</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">pivot</span> <span class="pre">table</span></code> created using <code class="docutils literal notranslate"><span class="pre">pd.pivot_table</span></code> API which is a fancy way to count the number of people in each bin for each age-bracket. This could also have been done using <code class="docutils literal notranslate"><span class="pre">df.groupby</span></code>.</p></li>
<li><p>A DataFrame structured identically to the pivot table, only all the values are converted to percentages of the row.</p></li>
</ol>
<p>** DataFrame  <code class="docutils literal notranslate"><span class="pre">pivot_table</span></code> **<br />
<img alt="DataFrame df2" src="_static/dist_age_df2.jpg" /></p>
<p>** DataFrame : Final Table as Percentages **<br />
<img alt="DataFrame df2" src="_static/dist_age_pivot_table.jpg" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">create_perc_by_age_df</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="c1"># add an distance bins and age bracket to a copy of the DF</span>
    <span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">bin_names</span> <span class="o">=</span> <span class="p">[</span> <span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">140</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]</span>
    <span class="n">df2</span><span class="p">[</span><span class="s1">&#39;bin&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">int</span><span class="p">(</span><span class="n">d</span> <span class="o">//</span> <span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">df2</span><span class="p">[</span><span class="s1">&#39;distance&#39;</span><span class="p">]]</span>
    <span class="n">bracket_names</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;-&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">9</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">81</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="p">]</span>
    <span class="n">bracket_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;88-99&#39;</span><span class="p">)</span>
    <span class="n">age_bracket</span> <span class="o">=</span> <span class="p">[</span> <span class="n">bracket_names</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">age</span> <span class="o">&gt;</span> <span class="mi">87</span> <span class="k">else</span> <span class="n">bracket_names</span><span class="p">[(</span><span class="n">age</span><span class="o">-</span><span class="mi">18</span><span class="p">)</span><span class="o">//</span><span class="mi">10</span><span class="p">]</span> <span class="k">for</span> <span class="n">age</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span> <span class="p">]</span>
    <span class="n">df2</span><span class="p">[</span><span class="s1">&#39;age_bracket&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">age_bracket</span>
    
    <span class="c1"># Pivot to get totals of age at distance</span>
    <span class="n">pivot_table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;distance&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="s1">&#39;bin&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;age_bracket&#39;</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    
    <span class="c1"># create a datafame showing percent of count at bin belongs to age-group</span>
    <span class="n">data_per_bin</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;bin&#39;</span><span class="p">:</span> <span class="n">pivot_table</span><span class="o">.</span><span class="n">index</span> <span class="p">}</span>
    <span class="n">totals</span> <span class="o">=</span> <span class="p">{</span> <span class="n">index</span><span class="p">:</span> <span class="n">row</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">pivot_table</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()</span> <span class="p">}</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">pivot_table</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">data_per_bin</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="n">r</span> <span class="o">/</span> <span class="n">totals</span><span class="p">[</span><span class="n">index</span><span class="o">*</span><span class="mi">10</span><span class="p">]</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pivot_table</span><span class="p">[</span><span class="n">col</span><span class="p">])]</span>
    
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">data_per_bin</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">plot_perc_by_age_area</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df2</span> <span class="o">=</span> <span class="n">create_perc_by_age_df</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">df2</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">area</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;bin&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.02</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Distance&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Percentage at Distance&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Each Age-Groups&#39; Percentage at Distance&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="examining-distance">
<h2>Examining Distance<a class="headerlink" href="#examining-distance" title="Link to this heading">#</a></h2>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-18" name="sd-tab-set-4" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-18">
Scatter</label><div class="sd-tab-content docutils">
<p>These two plots clearly show how scattered the distance values are. The plot on the left shows how men throw farther than women. The density of the dots gets thinner above 80 years-old and beyond 100 yards.</p>
<p>The plot on the right gives a glimpse into how many people are in a particular sport (e.g. very few in Golf and Hockey). The colors allow one to see that the older folks, by and large, throw shorter distances. And, Baseball has a few outliers.</p>
<p><img alt="Distance Scatter Plots" src="../_images/dist_scatter.png" /></p>
<div class="dropdown admonition">
<p class="admonition-title">See Code</p>
<p>We use Seaborn to present these plots so that we can take advantate of the named argument, <code class="docutils literal notranslate"><span class="pre">hue</span></code>.<br />
The two plots were positioned too close to each other at the start and the Sport names were overlapped on top of the plot on the left. We set the spacing using <code class="docutils literal notranslate"><span class="pre">plt.subplots_adjust</span></code>.</p>
<p>Most of this relatively simple code is setting the titles and labels.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">scatter_plots</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;distance&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;gender&#39;</span><span class="p">)</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;distance&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;sport&#39;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;age&#39;</span><span class="p">)</span>
    <span class="c1"># space out the two plots horizontally</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Distance vs Age&#39;</span><span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Gender&#39;</span><span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Age&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">):</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Distance&#39;</span><span class="p">)</span>
    
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Distance vs Sport w/ Age&#39;</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Age&#39;</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;lower left&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">.95</span><span class="p">,</span> <span class="mf">.05</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<input id="sd-tab-item-19" name="sd-tab-set-4" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-19">
Regression</label><div class="sd-tab-content docutils">
<p>To determine the impact of age on the throwing distance, we can do a <code class="docutils literal notranslate"><span class="pre">regplot</span></code> and calculate the <code class="docutils literal notranslate"><span class="pre">Coefficient</span> <span class="pre">of</span> <span class="pre">Determination</span></code>, which expresses how strongly a change in x impacts the change in y (and vice versa).</p>
<p><img alt="Distance Regression" src="../_images/dist_age_reg.png" /></p>
<p>The code is very short and simple.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">calc_r2_stats</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x_name</span><span class="p">,</span> <span class="n">y_name</span><span class="p">):</span>
    <span class="n">residual</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">linregress</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">x_name</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="n">y_name</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">residual</span><span class="o">.</span><span class="n">rvalue</span><span class="o">**</span><span class="mi">2</span>
    
<span class="k">def</span> <span class="nf">regplot_plot</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;distance&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="n">line_kws</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;linestyle&#39;</span><span class="p">:</span> <span class="s1">&#39;--&#39;</span><span class="p">},</span> <span class="n">ci</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;R2=</span><span class="si">{</span><span class="n">calc_r2_stats</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;age&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;distance&quot;</span><span class="p">)</span><span class="si">:</span><span class="s1">.3f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distance vs Age Regression Plot&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Distance&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Age&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-20" name="sd-tab-set-4" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-20">
Histogram</label><div class="sd-tab-content docutils">
<p>This plot allows us to see the total count of throwers at each distance. It looks to be a “normal distribution”, but it might also be a “binormal distribution” (which you can see more clearly in the section “Data by Gender” histrogram plots above.)</p>
<p><img alt="Distance Histogram" src="../_images/dist_hist.png" /></p>
<p>The code is very short and simple.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">hist_chart</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;distance&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Distance&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Count&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Count of Throwers at Each Distance&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-21" name="sd-tab-set-4" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-21">
Cumulative Histogram</label><div class="sd-tab-content docutils">
<p>This plot allows us to see how the longer the distance, the harder it is for someone to throw that far. It looks very much like a sigmoid curve and led me to consider finding ways to scientifically calculate the farthest anyone could possibly throw (using the same sample pool). That work will be done in the next section.</p>
<p><img alt="Distance Histogram" src="../_images/dist_cumm_hist.png" /></p>
<p>The code is very short and simple.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">cum_hist</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="c1"># Set up plot</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

    <span class="c1"># get histogram values by having numpy put into bins for us</span>
    <span class="n">bars</span><span class="p">,</span> <span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;distance&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
    
    <span class="c1"># manually create the cummlative values from bars</span>
    <span class="c1"># convert the cum_count to percent total as we go</span>
    <span class="n">cum_count</span> <span class="o">=</span> <span class="p">[</span> <span class="p">]</span>
    <span class="n">total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">bars</span><span class="p">)</span>
    <span class="n">cum_sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">bars</span><span class="p">:</span>
        <span class="n">cum_sum</span> <span class="o">+=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">n</span> <span class="o">/</span> <span class="n">total</span>
        <span class="n">cum_count</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cum_sum</span><span class="p">)</span>

    <span class="c1"># Plot cummulative histogram. </span>
    <span class="c1"># Bins has all boundaries, so remove the last &#39;fence-post&#39; </span>
    <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">bins</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">height</span><span class="o">=</span><span class="n">cum_count</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
    <span class="c1"># format the y-axis as a percentage. We could have manually set the yticks.</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mtick</span><span class="o">.</span><span class="n">PercentFormatter</span><span class="p">())</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Cummlative Percent of those at Distance or Less&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Distance&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Percent&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-22" name="sd-tab-set-4" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-22">
KDE</label><div class="sd-tab-content docutils">
<p>KDE stands for Kernel Density Estimation. Kernel Density Estimation is a non-parametric technique used to estimate the probability density function (PDF) of a continuous random variable. It allows us to estimate the underlying distribution of the data based on the available observations.</p>
<p>The basic idea behind KDE is to represent the data as a smooth continuous curve, which can provide insights into the shape, peaks, and variations in the data distribution. It is particularly useful when the data is limited or irregularly sampled.</p>
<p>In this plot we see how female throwing clearly peaks at a shorter distance than males. We then integrate the value under the curve to find the percentage of women who throw farter than the median male. This value is a staggering low 14%.</p>
<p>Using the same techniques we can also show that:</p>
<ul class="simple">
<li><p>14% of Women throw farther than the median Man. (Shaded in Yellow in plot below)</p></li>
<li><p>80% of Men throw farther than the median Woman</p></li>
<li><p>9% of Men throw farther than the Best Woman</p></li>
<li><p>91% of Men throw less than the <strong>Best Woman</strong></p></li>
</ul>
<p>This last statistic could be anecdotally used to claim that women can throw as far as men. But, the majority of these graphs show how men do, on average, throw farther.</p>
<p><img alt="Distance Scatter Plots" src="../_images/dist_kde.png" /></p>
<div class="dropdown admonition">
<p class="admonition-title">See Code</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">annotate_shade_area_under_curve</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">line_index</span><span class="p">,</span> <span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="c1"># Get the area under the curve, and shade it</span>
    <span class="n">area_under_curve</span><span class="p">,</span> <span class="n">pt</span> <span class="o">=</span> <span class="n">shade_area</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">line_index</span><span class="p">,</span> <span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>

    <span class="c1"># draw a vertical line at x_min, if we shaded</span>
    <span class="k">if</span> <span class="n">color</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x_min</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>
    
    <span class="c1"># Annotate the shaded area with text</span>
    <span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">area_under_curve</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="s1">.0f</span><span class="si">}</span><span class="s1">%&#39;</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pt</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">text</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">area_under_curve</span>

<span class="k">def</span> <span class="nf">shade_area</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">line_index</span><span class="p">,</span> <span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    ax is the axis object that contains the drawn lines</span>
<span class="sd">    line_index is the index of the line we want to use in the axis object</span>
<span class="sd">    Using the line object, calculate the area under the curve between x_min and x_max.</span>
<span class="sd">    if color is set, then shade that area with that color. otherwise, just calculate stuff.</span>
<span class="sd">    return a tuple of:</span>
<span class="sd">       area under the curve</span>
<span class="sd">       (x, y) a good point in the shaded area to use for annotation</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_lines</span><span class="p">()[</span><span class="n">line_index</span><span class="p">]</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get_xdata</span><span class="p">()</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get_ydata</span><span class="p">()</span>
    <span class="n">integration_function</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x1</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">area_under_curve</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">integrate</span><span class="o">.</span><span class="n">quad</span><span class="p">(</span><span class="n">integration_function</span><span class="p">,</span> <span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">color</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="p">((</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="n">x_min</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;=</span> <span class="n">x_max</span><span class="p">)),</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
        
    <span class="c1"># find good annotation point</span>
    <span class="n">xpos</span> <span class="o">=</span> <span class="n">x_min</span> <span class="o">+</span> <span class="mi">10</span>
    <span class="n">ypos</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">xpos</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
    
    <span class="k">return</span> <span class="n">area_under_curve</span><span class="p">,</span> <span class="p">(</span><span class="n">xpos</span><span class="p">,</span> <span class="n">ypos</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_perc_between</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span><span class="p">):</span>
    <span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;distance&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">x_min</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;distance&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">x_max</span><span class="p">)]</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">df2</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
    
<span class="k">def</span> <span class="nf">sns_density</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="c1"># set up</span>
    <span class="n">max_x</span> <span class="o">=</span> <span class="mi">140</span>
    <span class="n">women</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Female&#39;</span><span class="p">]</span>
    <span class="n">women_avg</span> <span class="o">=</span> <span class="n">women</span><span class="p">[</span><span class="s1">&#39;distance&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
    <span class="n">men</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Male&#39;</span><span class="p">]</span>
    <span class="n">man_avg</span> <span class="o">=</span> <span class="n">men</span><span class="p">[</span><span class="s1">&#39;distance&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="s1">&#39;navy&#39;</span><span class="p">,</span> <span class="s1">&#39;pink&#39;</span><span class="p">]</span>
    
    <span class="c1"># when we shade a portion of the curve, the axis returned</span>
    <span class="c1"># does not have an added line: get_lines() returns an empty list.</span>
    <span class="c1"># So, don&#39;t shade using shade=True during the call to kdeplot. Shade manually.</span>
    
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
    <span class="c1"># Draw the three lines: Combined, Men &amp; Women</span>
    <span class="k">for</span> <span class="n">d</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">([</span><span class="n">df</span><span class="p">,</span> <span class="n">men</span><span class="p">,</span> <span class="n">women</span><span class="p">],</span> <span class="n">colors</span><span class="p">):</span>
        <span class="n">axis</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">kdeplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;distance&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">clip</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">max_x</span><span class="p">))</span>
    
    <span class="c1"># now, manually shade each region. We could have set the named argument &#39;shade&#39;=True</span>
    <span class="c1"># when plotting, but we wanted the line data added to the axis for computations.</span>
    <span class="c1"># for info on lines: https://matplotlib.org/stable/api/_as_gen/matplotlib.lines.Line2D.html</span>
    <span class="k">for</span> <span class="n">line_index</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">colors</span><span class="p">):</span>
        <span class="n">shade_area</span><span class="p">(</span><span class="n">axis</span><span class="p">,</span> <span class="n">line_index</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">max_x</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
    
    <span class="n">annotate_shade_area_under_curve</span><span class="p">(</span><span class="n">axis</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">man_avg</span><span class="p">,</span> <span class="n">max_x</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Distance&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;Combined&#39;</span><span class="p">,</span> <span class="s1">&#39;Male&#39;</span><span class="p">,</span> <span class="s1">&#39;Female&#39;</span><span class="p">,</span> <span class="s1">&#39;Male Median&#39;</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Comparing Density by Gender&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="human-limits">
<h2>Human Limits<a class="headerlink" href="#human-limits" title="Link to this heading">#</a></h2>
<p>In this section we will attempt to discover the farthest a human being can throw a baseball. This was inspired
by the Cumulative Bar Chart where we could see that the slope of the chart flattened out as the distance got farther
and farther. It suggests (as does common sense), that eventually, no one else will be able to throw farther: there is
a limit to how far a human being can throw a ball. <em>What is that distance?</em></p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-23" name="sd-tab-set-5" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-23">
Summary</label><div class="sd-tab-content docutils">
<p>The shape of the curve in the Cumulative chart is Sigmoid-like (S-Curve). In this specific graph,
the <a href="https://en.wikipedia.org/wiki/Asymptote" target="_blank">asymptote</a> is at 100%. The y-value asymptote is
at the percentage and not at the distance. We want to rotate the graph so that our y-value is the distance thrown
and the x-axis is “time”. Unfortunately, we can’t just swap the x &amp; y axis to get this graph we want. What do we do?</p>
<p>I did a little thought experiment inspired by a statistical technique called
<a href="https://en.wikipedia.org/wiki/Bootstrapping_(statistics)" target="_blank">bootstrapping</a>. The idea is that when
you don’t have access to the true population data, you simulate it by resampling your sample data over and over. The idea
is to pretend that my data sample is the entire population of the world over an infinite amount of time. Let’s call this
“True Population” (even thought it is definitely NOT)! Then, I “simulate”
a moment of time by randomly taking a sample of our “True Population” to get a small dataset in this moment in time.</p>
<p>So, I’m assuming that I have “True Population” data and I’m simulating time. For each resample, I take the maximum value
to see if anyone has set a record for the farthest distance thrown. I repeat this until I get the maximum value in my
“True Population” dataset.</p>
<p>With this set of resampled data, I generated a plot of “records” over “time.” Then, I used some Curve of Best Fit techniques
to find the best fitting curve to our data. This has some limits because in real life, the curve would always have
the asymptote above the farthest distance thrown, but a curve of best fit minimizes the MSE and may decide that the
best fitting curve has the asymptote <em>below</em> the farthest distance thrown. Also, the resampling process is random and it
can create a simulated record set that is far from <em>real-looking</em>. I had to do multiple attempts at resampling to find
something that looks convincingly real.</p>
<p>I did four different Bootstrap Resamples, graphed them, did a curve of best fit to a Sigmoid curve, and then picked
the best one.</p>
<p><strong>Final Result</strong><br />
The most likely y-upper-limit (asymptote) that represents the upper limit of human performance is:</p>
<div style="font-size: 24px; font-weight: bold;">149 Yards</div>   
See the content in the other tabs for details.
</div>
<input id="sd-tab-item-24" name="sd-tab-set-5" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-24">
The Curves</label><div class="sd-tab-content docutils">
<p>The S-Shaped curve I initially looked at was the generalized form of Sigmoid.  <span class="math notranslate nohighlight">\(y = \frac{L}{1 + e^{-k \cdot (x - x_0)}} + b\)</span></p>
<p>In this generalized form, I would need to optimize for 4 coefficients: <span class="math notranslate nohighlight">\(L\)</span>, <span class="math notranslate nohighlight">\(k\)</span>, <span class="math notranslate nohighlight">\(x_0\)</span> and <span class="math notranslate nohighlight">\(b\)</span>.</p>
<p>To simplify, we can fix <span class="math notranslate nohighlight">\(x_0 = 0\)</span>. The coefficients’ impact the curve are as follows:</p>
<ul class="simple">
<li><p>b = lower limit of y</p></li>
<li><p>L = y value at <span class="math notranslate nohighlight">\(x_0\)</span>  (upper limit of y = b + L)</p></li>
<li><p>k = curve rate (how fast does the line approach the y-upper-limit)</p></li>
</ul>
<p>Here is how these curves look on a graph:<br />
<img alt="Sigmoid curves" src="../_images/dist_sigmoid.png" /></p>
</div>
<input id="sd-tab-item-25" name="sd-tab-set-5" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-25">
Bootstrap Resamples</label><div class="sd-tab-content docutils">
<p>I picked several throwers from the full data, found the max, and had that be our datapoint at that time.
My next resample represented the next point in time. If the new max value was not greater than the previous
max value, then we ignored the values and tried again at the next point in time. If a new greater value
was found, we considered this to be a new record.</p>
<p>Here are the four resample data sets:</p>
<p><img alt="Image 1" src="../_images/dist_boot1_data.jpg" /> <img alt="Image 2" src="../_images/dist_boot2_data.jpg" />
<img alt="Image 3" src="../_images/dist_boot3_data.jpg" /> <img alt="Image 4" src="../_images/dist_boot4_data.jpg" /></p>
<p>Here are four resamples ploted along with their best fit, Sigmoid curves:</p>
<p><img alt="Image 1" src="../_images/dist_bootstrap1.png" /> <img alt="Image 2" src="../_images/dist_bootstrap2.png" />
<img alt="Image 3" src="../_images/dist_bootstrap3.png" /> <img alt="Image 4" src="../_images/dist_bootstrap4.png" /></p>
<p>The y-upper-limit (asymptote) for these 4 resamples are: 149, 131, 131, 131 (respectively). The curve that
appears to be the most believable is the first one with 149 yards as the upper limit of human performance.</p>
</div>
<input id="sd-tab-item-26" name="sd-tab-set-5" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-26">
Code</label><div class="sd-tab-content docutils">
<p>The resample code is not shown. The <code class="docutils literal notranslate"><span class="pre">fn</span></code> method is a rearranged version of the Sigmoid curve.
Because our Sigmoid curve is asymptotic, the best way to successfully get a curve of best fit
was to use the Trust Region Reflective algorithm where we established bounds.</p>
<p>For more details on how all of this works, see the page ‘Curve of Best Fit’ (TODO).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fn</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">abs_top</span><span class="p">,</span> <span class="n">rate</span><span class="p">,</span> <span class="n">first</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    parabolic shape that has a top-most y value at abs_top.</span>
<span class="sd">    It approaches the asymptote at &#39;rate&#39;</span>
<span class="sd">    The first value is at first.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">abs_top</span><span class="o">-</span><span class="n">first</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">rate</span><span class="o">*</span><span class="n">x</span><span class="p">))</span> <span class="o">+</span> <span class="n">first</span>
    <span class="k">return</span> <span class="n">y</span>

<span class="k">def</span> <span class="nf">fit_to_curve</span><span class="p">(</span><span class="n">x_data</span><span class="p">,</span> <span class="n">y_data</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">p0</span><span class="p">,</span> <span class="n">cust_bounds</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fit a curve to the data points and find the coefficients in the equation.</span>
<span class="sd">    Since our curve has some requirements, we need to establish some bounds</span>
<span class="sd">    and use the &#39;trf&#39; (Trust Region Reflective algorithm) method instead of the </span>
<span class="sd">    default &#39;lf&#39;, Levenberg-Marquardt algorithm, which is unbounded.</span>
<span class="sd">    </span>
<span class="sd">    The bounds can be hard to determine. If done incorrectly, the shape of the</span>
<span class="sd">    curve can be pretty far off the expected curve. If not provided, we will</span>
<span class="sd">    set the bounds assuming an S-curve. Bounds is a tuple:</span>
<span class="sd">       ( [list of min values for each arg], [list of max values] )</span>
<span class="sd">       </span>
<span class="sd">    Our custom, asymptotic curve has:</span>
<span class="sd">      - abs_top value must be greater than the max point in the dataset.</span>
<span class="sd">      - rate should be between [0.0001, 3]. </span>
<span class="sd">      - first should be [0, min(y)*2]</span>
<span class="sd">    Note that P0 needs to have values the fit within the bounds.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># p0 is the initial guess at all the parameters that our function, sigmoid,</span>
    <span class="c1"># takes. curve_fit uses p0 to figure out how many arguments in the function to optimize.</span>
    <span class="c1"># curve_fit will use something like a Gradient Descent approach to solve</span>
    <span class="c1"># the problem. Each variable into the function (sigmoid) is a dimension</span>
    <span class="c1"># in the problem to optimize Least Squares (lowest sum of residuals squared)</span>
    <span class="k">if</span> <span class="n">cust_bounds</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">cust_bounds</span> <span class="o">=</span> <span class="p">([</span><span class="nb">max</span><span class="p">(</span><span class="n">y_data</span><span class="p">)</span><span class="o">+</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.0001</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">y_data</span><span class="p">)</span><span class="o">*</span><span class="mf">.6</span><span class="p">],</span> <span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="n">y_data</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mf">.15</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">y_data</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="p">])</span>
        
    <span class="n">popt</span><span class="p">,</span> <span class="n">pcov</span> <span class="o">=</span> <span class="n">curve_fit</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">x_data</span><span class="p">,</span> <span class="n">y_data</span><span class="p">,</span> <span class="n">p0</span><span class="o">=</span><span class="n">p0</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;trf&#39;</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">cust_bounds</span><span class="p">)</span>

    <span class="c1"># Return the optimized parameters</span>
    <span class="k">return</span> <span class="n">popt</span>

<span class="k">def</span> <span class="nf">plot_guess</span><span class="p">(</span><span class="n">x_data</span><span class="p">,</span> <span class="n">y_data</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="c1"># Generate the x values for the fitted curve</span>
    <span class="n">x_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">x_data</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">x_data</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
    <span class="c1"># unpack the values to pass into fn</span>
    <span class="n">y_fit</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">x_fit</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>

    <span class="c1"># Plot the original data and the fitted curve</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x_data</span><span class="p">,</span> <span class="n">y_data</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Data&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_fit</span><span class="p">,</span> <span class="n">y_fit</span><span class="p">,</span> <span class="s1">&#39;r-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Fit&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">plot_all_4_resamples</span><span class="p">():</span>
    <span class="c1"># resamples saved in csv files and reloaded here</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
        <span class="n">df_boot</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;boot&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span><span class="p">)</span>
        <span class="n">x_data</span><span class="p">,</span> <span class="n">y_data</span> <span class="o">=</span> <span class="n">df_boot</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">],</span> <span class="n">df_boot</span><span class="p">[</span><span class="s1">&#39;record&#39;</span><span class="p">]</span>
        <span class="n">my_p0</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">max</span><span class="p">(</span><span class="n">y_data</span><span class="p">)</span><span class="o">+</span><span class="mi">5</span><span class="p">,</span> <span class="mf">.1</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">y_data</span><span class="p">)]</span>
        <span class="n">bounds</span> <span class="o">=</span>  <span class="p">([</span><span class="nb">max</span><span class="p">(</span><span class="n">y_data</span><span class="p">)</span><span class="o">+</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.0001</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">y_data</span><span class="p">)</span><span class="o">*</span><span class="mf">.6</span><span class="p">],</span> <span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="n">y_data</span><span class="p">)</span><span class="o">+</span><span class="mi">20</span><span class="p">,</span> <span class="mf">.15</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">y_data</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">fit_to_curve</span><span class="p">(</span><span class="n">x_data</span><span class="p">,</span> <span class="n">y_data</span><span class="p">,</span> <span class="n">fn</span><span class="p">,</span> <span class="n">my_p0</span><span class="p">,</span> <span class="n">cust_bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">)</span>
        <span class="n">plot_guess</span><span class="p">(</span><span class="n">x_data</span><span class="p">,</span> <span class="n">y_data</span><span class="p">,</span> <span class="n">fn</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Optimized parameters: </span><span class="si">{</span><span class="n">args</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="machine-learning">
<h1>Machine learning<a class="headerlink" href="#machine-learning" title="Link to this heading">#</a></h1>
<p>TODO: We’ve created a ML model that predicts distance based on the three features: gender, sport and age. (I think) the results show that the model is not very accurate at predicting.</p>
<p>(show accuracy)
(show code)</p>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./visualizations"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="line_of_best_fit.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Curve of Best Fit</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Case Study on Distance</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#background-of-hypothetical-project">Background of Hypothetical Project</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#worthless-graphs">Worthless Graphs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-by-gender">Data by Gender</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-by-sport">Data by Sport</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-by-age">Data by Age</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#examining-distance">Examining Distance</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#human-limits">Human Limits</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#machine-learning">Machine learning</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jeff Stride
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <a href="https://idp.mrstride.com/acknowledgements.html">Acknowledgements</a>
</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>