
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Line Plots &#8212; IDP at NCHS</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=6c3db60c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script kind="utterances">

    var commentsRunWhenDOMLoaded = cb => {
    if (document.readyState != 'loading') {
        cb()
    } else if (document.addEventListener) {
        document.addEventListener('DOMContentLoaded', cb)
    } else {
        document.attachEvent('onreadystatechange', function() {
        if (document.readyState == 'complete') cb()
        })
    }
}

var addUtterances = () => {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "https://utteranc.es/client.js";
    script.async = "async";

    script.setAttribute("repo", "jeffstride/idp");
    script.setAttribute("issue-term", "pathname");
    script.setAttribute("theme", "preferred-color-scheme");
    script.setAttribute("label", "💬 Comments");
    script.setAttribute("crossorigin", "anonymous");

    sections = document.querySelectorAll("div.section");
    if (sections !== null) {
        section = sections[sections.length-1];
        section.appendChild(script);
    }
}
commentsRunWhenDOMLoaded(addUtterances);
</script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-DW6SHVPBYV"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-DW6SHVPBYV');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-DW6SHVPBYV');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'visualizations/lineplots';</script>
    <link rel="icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Curve of Best Fit" href="line_of_best_fit.html" />
    <link rel="prev" title="Geospatial Plots" href="geospatial.html" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DW6SHVPBYV"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-DW6SHVPBYV');
    </script>


  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="IDP at NCHS - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="IDP at NCHS - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    <i class="fas fa-hand-sparkles fa-fw"></i> Introduction
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../Topics/index.html"><i class="fas fa-layer-group fa-fw"></i> Topics</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Topics/misc/index.html"><i class="fas fa-book fa-fw"></i> Miscellaneous</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../Topics/misc/submitting.html">Submitting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/misc/collections.html">Collections</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/misc/comments.html">Writing Effective Comments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/misc/rand_response.html">Reversing Randomized Response</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/misc/my_st.html">Notes on MyST</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/misc/interfaces_classes.html">Interfaces and Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/misc/flake8.html">Flake8</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Topics/pandas/index.html"><i class="fas fa-book fa-fw"></i> Pandas</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../Topics/pandas/dataframe.html">DataFrame</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/pandas/slicing-methods.html">DataFrame Indexing Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/pandas/mynb.html">Useful API</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Topics/machine_learning/index.html"><i class="fas fa-book fa-fw"></i> Machine Learning</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../Topics/machine_learning/feature-importance.html">Feature Importance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/machine_learning/assessing-accuracy.html">Assessing Accuracy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/machine_learning/classification.html">Classification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/machine_learning/regression.html">Regression - Distance Study</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/machine_learning/classifier-rand.html">Classification - Fully Random</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/machine_learning/when-to-avoid-ml.html">When to Avoid Using Machine Learning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/machine_learning/ML.html"><i class="fas fa-book fa-fw"></i> Leveraging ML</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Topics/built-in/index.html"><i class="fas fa-book fa-fw"></i> Built-in</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../Topics/built-in/arguments.html">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Topics/built-in/formatted-string.html">Formatted Strings</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html"><i class="fas fa-book fa-fw"></i> Visualizations</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="barchart.html">Bar Charts</a></li>
<li class="toctree-l2"><a class="reference internal" href="geospatial.html">Geospatial Plots</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Line Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="line_of_best_fit.html">Curve of Best Fit</a></li>

<li class="toctree-l2"><a class="reference internal" href="case_study_dist.html">Case Study on Distance</a></li>

</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/jeffstride/idp" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/jeffstride/idp/edit/main/book_source/visualizations/lineplots.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/jeffstride/idp/issues/new?title=Issue%20on%20page%20%2Fvisualizations/lineplots.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/visualizations/lineplots.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Line Plots</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#libraries">Libraries</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data">Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dataframe">DataFrame</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-plots">Simple Plots</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#twinx-plots">Twinx Plots</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#another-twinx-example">Another Twinx Example</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#seaborn">Seaborn</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="line-plots">
<h1>Line Plots<a class="headerlink" href="#line-plots" title="Link to this heading">#</a></h1>
<p>Line Plots are likely the most common plot you’ll create in IDP. It is fantastic for
<a href='geospatial.html#correlations-and-coefficient-of-determination'>showing correlations</a>. While line plots are not complicated, it can be frustrating
to draw multiple lines as you intend. Furthermore, there are many different API available to draw lines and they
accept different named arguments (which is frustrating!).</p>
<p>On this page you’ll see how to:</p>
<ul class="simple">
<li><p>draw multiple lines using various libraries</p></li>
<li><p>do Time-Slices of a <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code></p></li>
<li><p>rescale the axis for specific lines only</p></li>
<li><p>customize line styles</p></li>
</ul>
<section id="libraries">
<h2>Libraries<a class="headerlink" href="#libraries" title="Link to this heading">#</a></h2>
<p>There are several different libraries and objects that allow you to plot a line. The one you use depends on the structure of your data and the complexity of your plot. I have found that the most useful object to use when drawing is the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> where you can do most of what you want to do. When doing subplots, using the <code class="docutils literal notranslate"><span class="pre">Axes</span></code> object becomes invaluable.</p>
<p>You should read and become familiar with all the named arguments and options for each library/object.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Library</p></th>
<th class="head"><p>API</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Pandas</p></td>
<td><p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.plot.html">DataFrame.plot</a></p></td>
<td><p>Recommended and most common method of plotting in IDP</p></td>
</tr>
<tr class="row-odd"><td><p>Matplotlib.pyplot</p></td>
<td><p><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.plot.html">plt.plot</a></p></td>
<td><p>The fundamental plotting API. All other objects will essentially call this one eventually. Access to more named arguments, but <strong>works on only one axis.</strong></p></td>
</tr>
<tr class="row-even"><td><p>Matplotlib.axes</p></td>
<td><p><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.plot.html#matplotlib.axes.Axes.plot">axes.plot</a></p></td>
<td><p>Allows one to target a plot to a specific axes. Very useful in customizing figures with multiple subplots.</p></td>
</tr>
<tr class="row-odd"><td><p>Pandas</p></td>
<td><p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.plot.html">Series.plot</a></p></td>
<td><p>Useful when the object is a <code class="docutils literal notranslate"><span class="pre">Series</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Seaborn</p></td>
<td><p><a class="reference external" href="https://seaborn.pydata.org/generated/seaborn.lineplot.html">sns.lineplot</a></p></td>
<td><p>Also works on unpivoted data. Provides simple access to some statistics and various styles of drawing lines.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="seealso dropdown admonition">
<p class="admonition-title">Helpful Resources/API</p>
<ul class="simple">
<li><p><a class="reference external" href="https://matplotlib.org/stable/gallery/color/named_colors.html">matplotlib Colors</a> : List of color names</p></li>
<li><p><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.clf.html">plt.clf</a> : Clear the current figure</p></li>
<li><p><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.gca.html">plt.gca</a> : Get figure’s axes</p></li>
<li><p><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.xticks.html#matplotlib.pyplot.xticks">plt.xticks</a> : Customize the x-axis tick marks and/or labels. Note that <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code> applies to the style of the text and are documented <a class="reference external" href="https://matplotlib.org/stable/api/text_api.html#matplotlib.text.Text">here</a></p></li>
<li><p><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.annotate.html#matplotlib.axes.Axes.annotate">ax.annotate</a> : Draws text on the axes</p></li>
</ul>
</div>
</section>
<section id="data">
<h2>Data<a class="headerlink" href="#data" title="Link to this heading">#</a></h2>
<p>The data is three years of temperature data from Snohomish county. This page will do some computations and data organization
to enable better plots, but this is what the data basically looks like. We load it as a <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code> using <code class="docutils literal notranslate"><span class="pre">pd.read_csv</span></code>.<br />
<img alt="Temperature Data" src="../_images/line_data.png" /></p>
</section>
<section id="dataframe">
<h2>DataFrame<a class="headerlink" href="#dataframe" title="Link to this heading">#</a></h2>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-0">
Simple</label><div class="sd-tab-content docutils">
<p>In this very simple, one line, <code class="docutils literal notranslate"><span class="pre">df.plot()</span></code>, we default to drawing all columns using the <code class="docutils literal notranslate"><span class="pre">index</span></code> as the x-axis. We see that by default, there is no label
for the y-axis and the x-axis ticks are rotated for us. The <code class="docutils literal notranslate"><span class="pre">Sunrise</span></code> and <code class="docutils literal notranslate"><span class="pre">Sunset</span></code> columns cause all the other data to be
squashed down to the bottom due to the units being 24-hour time. Furthermore, the 24-hour time causes there to be “jumps”
in the data because it will jump from 1059 to 1100 since 1075 is not a valid time. We will fix this below.<br />
<img alt="Default Plot" src="../_images/line_default_df_plot.png" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># This will plot all columns on the same axes so long as all the values</span>
<span class="c1"># in each cell is a numerical value</span>
<span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="c1"># move the legend to the side by tying the upper-left of the legend</span>
<span class="c1"># to the coordinate (1,.9) which is in units of percentages of the drawn figure.</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Default Graph of a DataFrame&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-1">
Multi-Line</label><div class="sd-tab-content docutils">
<p>We can very easily plot a specific set of lines by providing a list of column names. This plot is identical
to the plot shown in the “Min &amp; Max” tab below.<br />
<img alt="Temperature Data" src="../_images/line_min_max_temps.png" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;MinTemp&#39;</span><span class="p">,</span> <span class="s1">&#39;MaxTemp&#39;</span><span class="p">],</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Min/Max Temperatures&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-2" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-2">
Subplots</label><div class="sd-tab-content docutils">
<p>We can create a relatively complex figure with four subplots using one line of code. We set just
a few things: figure size, columns to plot on <code class="docutils literal notranslate"><span class="pre">y</span></code>, line styles, grid lines turned on, and xlabel.</p>
<p>By providing just a few named arguments, we can get a pretty complex figure dran in 1 line!<br />
<img alt="Subplots" src="../_images/line_subplots.png" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span>
        <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;MaxTemp&#39;</span><span class="p">,</span> <span class="s1">&#39;Normal&#39;</span><span class="p">,</span> <span class="s1">&#39;Precipitation&#39;</span><span class="p">,</span> <span class="s1">&#39;Day Light&#39;</span><span class="p">],</span> 
        <span class="n">subplots</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Weather Summary&#39;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="s1">&#39;-.&#39;</span><span class="p">],</span> <span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="simple-plots">
<h2>Simple Plots<a class="headerlink" href="#simple-plots" title="Link to this heading">#</a></h2>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-3" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" for="sd-tab-item-3">
Temperatures</label><div class="sd-tab-content docutils">
<p><img alt="Default Plot" src="../_images/line_temps_for_2021.png" /><br />
We take a <code class="docutils literal notranslate"><span class="pre">slice</span></code> of the dataframe using <code class="docutils literal notranslate"><span class="pre">loc</span></code> and then plot only three columns.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># do a time-slice using the fact that we have a TimeSeries and plot only 2021</span>
<span class="c1"># plot the three lines on the DataFrame by providing all the column names</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2021-01&#39;</span><span class="p">:</span><span class="s1">&#39;2021-12&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;MaxTemp&#39;</span><span class="p">,</span> <span class="s1">&#39;MinTemp&#39;</span><span class="p">,</span> <span class="s1">&#39;AvgTemp&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Temperatures for 2021&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-4" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" for="sd-tab-item-4">
Day light</label><div class="sd-tab-content docutils">
<p><img alt="Temperature Data" src="../_images/line_hours_of_daylight.png" /><br />
We do some math on <code class="docutils literal notranslate"><span class="pre">Sunrise</span></code> and <code class="docutils literal notranslate"><span class="pre">Sunset</span></code> to convert them to fractions of an hour and thereby eliminate the
apparent jumping.  We convert the minutes <code class="docutils literal notranslate"><span class="pre">t%100</span></code> to be a percentage of an hour. The following code
adds three new columns <code class="docutils literal notranslate"><span class="pre">['SunsetHr',</span> <span class="pre">'SunriseHr',</span> <span class="pre">'Day</span> <span class="pre">Light']</span></code> to the DataFrame and then plots <code class="docutils literal notranslate"><span class="pre">Day</span> <span class="pre">Light</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Sunset&#39;</span><span class="p">,</span> <span class="s1">&#39;Sunrise&#39;</span><span class="p">]:</span>
    <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="o">+</span><span class="s1">&#39;Hr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">t</span><span class="o">//</span><span class="mi">100</span> <span class="o">+</span> <span class="p">(</span><span class="n">t</span><span class="o">%</span><span class="mi">100</span><span class="p">)</span><span class="o">/</span><span class="mi">60</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;Day Light&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;SunsetHr&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;SunriseHr&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;Day Light&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Hours of Daylight&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-5" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" for="sd-tab-item-5">
Min &amp; Max</label><div class="sd-tab-content docutils">
<p><img alt="Temperature Data" src="../_images/line_min_max_temps.png" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># we can grab one Series at a time and plot those on the same figure/axes.</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;MinTemp&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;MaxTemp&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Min/Max Temperatures&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-6" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" for="sd-tab-item-6">
Custom Line</label><div class="sd-tab-content docutils">
<p><img alt="custom Line" src="../_images/line_custom_line.png" /><br />
We can customize the line using some parameters to the <code class="docutils literal notranslate"><span class="pre">plt.plot</span></code> method. In most cases, you’ll
want to use one of the string shorthand representations of linestyles. <code class="docutils literal notranslate"><span class="pre">['-',</span> <span class="pre">'--',</span> <span class="pre">':',</span> <span class="pre">'-.']</span></code>  But,
we choose to set a custom dashed style, because we can. See <a class="reference external" href="https://matplotlib.org/stable/gallery/lines_bars_and_markers/linestyles.html">linestyle documentation</a> for more details.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Time-Slice the first 2 weeks of 2020</span>
<span class="n">january</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;MaxTemp&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2020-01-01&#39;</span><span class="p">:</span><span class="s1">&#39;2020-01-14&#39;</span><span class="p">]</span>
<span class="c1"># Set line color, width, style and markers.</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">january</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;tab:purple&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">)),</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;2 Weeks Max Temp in January 2020&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="twinx-plots">
<h2>Twinx Plots<a class="headerlink" href="#twinx-plots" title="Link to this heading">#</a></h2>
<p>There are times when we want to plot two lines together but their units are dramatically different.
You can see this impact in the DataFrame Default image at the top of this page.</p>
<p>Here we will look at an example where the the units gets in the way of our plot. Then, we will
address it using <code class="docutils literal notranslate"><span class="pre">twinx</span></code>. <a class="reference external" href="https://matplotlib.org/stable/gallery/spines/multiple_yaxis_with_spines.html">Online example</a></p>
<p>Let’s plot the normal temperature (average temperature over many years)
along with the the average current temperature and the amount of current precipitation.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-7" name="sd-tab-set-2" type="radio">
<label class="sd-tab-label" for="sd-tab-item-7">
First Attempt</label><div class="sd-tab-content docutils">
<p><img alt="Bad Precipitation" src="../_images/line_rain_temps.png" /><br />
Here you’ll see how the amount of precipitation is dwarfed by the scale of the temperatures. Below is the code
used to generate the above plot. Note that we <code class="docutils literal notranslate"><span class="pre">resample</span></code> at the week interval to smooth out the data. And,
for precipitation, we use <code class="docutils literal notranslate"><span class="pre">sum</span></code> instead of <code class="docutils literal notranslate"><span class="pre">mean</span></code> to get a larger, more representative value.</p>
<p>We also use <code class="docutils literal notranslate"><span class="pre">loc</span></code> to do a time-slice of the data which is easy because our DataFrame is a
<a href='https://cse163.github.io/book/module-3-pandas/lesson-9-time-series/time-series.html' target='_blank'>TimeSeries.</a>
Python semantically understands the date strings.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Creating a DataFrame and ploting it is very simple and gets us most of </span>
<span class="c1"># what we want. We ae missing a proper scale for the rain.</span>

<span class="c1"># Resample the Average Temperature at the weekly rate to remove noise.</span>
<span class="n">at</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;AvgTemp&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2021-08&#39;</span><span class="p">:</span><span class="s1">&#39;2022-07&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">&quot;W&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># Resample and sum up the rain for the week to amplify the values. </span>
<span class="c1"># Using a mean() value has the amount of rain too small.</span>
<span class="n">rain</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Precipitation&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2021-08&#39;</span><span class="p">:</span><span class="s1">&#39;2022-07&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;W&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="c1"># To have a valid DataFrame, we need an equal number of rows in each column.</span>
<span class="c1"># Eventhough the normal temperature is already smooth, we resample to reduce</span>
<span class="c1"># the number of rows to match the other columns and to give a good mean value. </span>
<span class="n">sn</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Normal&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2021-08&#39;</span><span class="p">:</span><span class="s1">&#39;2022-07&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">&quot;W&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># Create the data frame from a dictionary representation of these 3 Series.</span>
<span class="n">df_year</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;Normal Temp&#39;</span><span class="p">:</span> <span class="n">sn</span><span class="p">,</span> 
                        <span class="s1">&#39;Avg Temp for Week&#39;</span><span class="p">:</span> <span class="n">at</span><span class="p">,</span> 
                        <span class="s1">&#39;Total Rain for Week&#39;</span><span class="p">:</span> <span class="n">rain</span><span class="p">})</span>
<span class="n">df_year</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;A Year of Precipitation &amp; Temperatures&#39;</span><span class="p">)</span>
<span class="c1"># The y-axis represents two units!</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Temp in Fahrenheit</span><span class="se">\n</span><span class="s1">Precipitation in Inches&#39;</span><span class="p">)</span>
<span class="c1"># Remove &#39;DATE&#39; from label as it is obvious</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-8" name="sd-tab-set-2" type="radio">
<label class="sd-tab-label" for="sd-tab-item-8">
Rescaled</label><div class="sd-tab-content docutils">
<p><img alt="Good Precipitation" src="../_images/line_rain_temps_fixed.png" /><br />
In this new version, we’ve done several things differently. First, we didn’t build a DataFrame
because a DataFrame is restricted to having the same number of values in each column. Instead,
we use plot using the <code class="docutils literal notranslate"><span class="pre">Series</span></code> object which gives us some added flexibility.
We <code class="docutils literal notranslate"><span class="pre">resample</span></code>d each <code class="docutils literal notranslate"><span class="pre">Series</span></code> at a different rate to have finer control over how
we smooth the curve. To make the precipitation be more pronounced, we summed up the values
over a <strong>two week</strong> period.</p>
<p>When I was developing this sample, I encountered a problem where the legends displayed separately, one for each axis. To fix
this problem, I got help from ChatGPT which showed me how to combine the ‘handles’ and ‘labels’ into a single legend.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># No need to resample - the curve is smooth</span>
<span class="n">sn</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Normal&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2021-08&#39;</span><span class="p">:</span><span class="s1">&#39;2022-07&#39;</span><span class="p">]</span> 
<span class="c1"># To smooth out the Avg Temp curve, weekly is sufficient</span>
<span class="n">at</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;AvgTemp&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2021-08&#39;</span><span class="p">:</span><span class="s1">&#39;2022-07&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">&quot;W&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>  
<span class="c1"># Resample bi-weekly to smooth out the curve even more</span>
<span class="n">rain</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Precipitation&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2021-08&#39;</span><span class="p">:</span><span class="s1">&#39;2022-07&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;2W&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="c1"># This needs to be set before calling the plot() method</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>

<span class="c1"># Be sure to set the labels here for retrieval later</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">sn</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">sn</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Normal Temp&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">at</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">at</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Avg Weekly Temp&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;Fahrenheit&#39;</span><span class="p">)</span>
<span class="c1"># create another axis </span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rain</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">rain</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Total Bi-Weekly Rain&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Total Rain for Week&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">)</span>

<span class="c1"># The above code creates two distinct legends. </span>
<span class="c1"># Let&#39;s combine the two sets into a single legend.</span>
<span class="n">handles1</span><span class="p">,</span> <span class="n">labels1</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()</span>
<span class="n">handles2</span><span class="p">,</span> <span class="n">labels2</span> <span class="o">=</span> <span class="n">ax2</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()</span>
<span class="n">combined_handles</span> <span class="o">=</span> <span class="n">handles1</span> <span class="o">+</span> <span class="n">handles2</span>
<span class="n">combined_labels</span> <span class="o">=</span> <span class="n">labels1</span> <span class="o">+</span> <span class="n">labels2</span>
<span class="c1"># position the upper-left of the legend to the coordinates (1.0, 0.9)</span>
<span class="c1"># where these are percentages of the size of the figure. This pushes</span>
<span class="c1"># the legend to the right of the figure</span>
<span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">combined_handles</span><span class="p">,</span> <span class="n">combined_labels</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;A Year of Rain &amp; Temperatures&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="another-twinx-example">
<h3>Another Twinx Example<a class="headerlink" href="#another-twinx-example" title="Link to this heading">#</a></h3>
<p>This example is nice because it annotates the daylight curve with the length of the day.
The plot shows how the average temperature “lags” the length of the day: the temperature
doesn’t change immediately with the length of the day.</p>
<p>The code takes a time-slice for a 12 month period. When finding the equinox points,
we make use of Tuple packing and unpacking to combine two lines of code into one line. This is a bit
of a trick and is a nice way to shorten highly similar code.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-9" name="sd-tab-set-3" type="radio">
<label class="sd-tab-label" for="sd-tab-item-9">
Image</label><div class="sd-tab-content docutils">
<p><img alt="Temperature &amp; Daylight" src="../_images/line_temp_daylight.png" /></p>
</div>
<input id="sd-tab-item-10" name="sd-tab-set-3" type="radio">
<label class="sd-tab-label" for="sd-tab-item-10">
Code</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">avg</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;AvgTemp&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2020-08&#39;</span><span class="p">:</span><span class="s1">&#39;2021-07&#39;</span><span class="p">]</span>
<span class="n">day_len</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Day Light&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2020-08&#39;</span><span class="p">:</span><span class="s1">&#39;2021-07&#39;</span><span class="p">]</span>

<span class="c1"># find the minimum and maximum daylight days.</span>
<span class="c1"># Use Tuple packing and unpacking to reduce the line count. Trick!</span>
<span class="n">min_day</span><span class="p">,</span> <span class="n">max_day</span> <span class="o">=</span> <span class="n">day_len</span><span class="o">.</span><span class="n">idxmin</span><span class="p">(),</span> <span class="n">day_len</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span>
<span class="n">min_len</span><span class="p">,</span> <span class="n">max_len</span> <span class="o">=</span> <span class="n">day_len</span><span class="p">[</span><span class="n">min_day</span><span class="p">],</span> <span class="n">day_len</span><span class="p">[</span><span class="n">max_day</span><span class="p">]</span>

<span class="c1"># Create a figure and a set of subplots</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Plot the first series on the left y-axis</span>
<span class="c1"># We need to set the rotation before we plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">avg</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">avg</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;tab:blue&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Avg Daily Temp&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="c1"># create a second axes for better visualization of Day Length</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>

<span class="c1"># plot the Day Length and set the label</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">day_len</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">day_len</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;darkviolet&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Day Light Hours&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;darkviolet&#39;</span><span class="p">)</span>

<span class="c1"># plot the min/max with red points and annotate the day length</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">scatter</span><span class="p">([</span><span class="n">min_day</span><span class="p">,</span> <span class="n">max_day</span><span class="p">],</span> <span class="p">[</span><span class="n">min_len</span><span class="p">,</span> <span class="n">max_len</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">([</span><span class="n">min_day</span><span class="p">,</span> <span class="n">max_day</span><span class="p">],</span> <span class="p">[</span><span class="n">min_len</span><span class="p">,</span> <span class="n">max_len</span><span class="p">]):</span>
    <span class="c1"># right alight the text to the xy-offset value</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">y</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1"> Hours&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">textcoords</span><span class="o">=</span><span class="s1">&#39;offset points&#39;</span><span class="p">,</span> 
             <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Average Temp &amp; Day Light</span><span class="se">\n</span><span class="s1">Snohomish 2020-21&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="seaborn">
<h2>Seaborn<a class="headerlink" href="#seaborn" title="Link to this heading">#</a></h2>
<p>I’ve found that using Seaborn is helpful in only a few situations.</p>
<ol class="arabic simple">
<li><p>When the data is in the “unpivoted” format.</p></li>
<li><p>When you have multiple y-values at the same x-value and you want to average them out automatically.</p></li>
<li><p>When you have many lines that you want to plot with different colors.</p></li>
<li><p>When you want to differentiate the lines using <code class="docutils literal notranslate"><span class="pre">size</span></code> or <code class="docutils literal notranslate"><span class="pre">style</span></code>.</p></li>
<li><p>When you want to do a scatter plot and do a <a class="reference internal" href="line_of_best_fit.html"><span class="doc std std-doc">line of best fit</span></a>.</p></li>
</ol>
<div class="seealso dropdown admonition">
<p class="admonition-title">Pivoted vs Unpivoted</p>
<p><strong>PIVOTED</strong><br />
The <em>“pivot”</em> format is where the data is simply organized by column. There is a column that contains the x-values,
and there is a column that contains the y-values. In the data shown below, we would use the column <code class="docutils literal notranslate"><span class="pre">year</span></code> as the x-value,
and the columns <code class="docutils literal notranslate"><span class="pre">investment</span></code> and/or <code class="docutils literal notranslate"><span class="pre">return</span></code> as the y-value to draw one or two lines.<br />
<img alt="Pivot Data" src="../_images/annotation_data.jpg" /></p>
<p><strong>UNPIVOTED</strong><br />
The <em>“unpivoted”</em> format is where there is a column dedicated to expressing which “line” the row belongs to.
For example, in the data shown below, you might use the <code class="docutils literal notranslate"><span class="pre">DATE</span></code> column of the DataFrame as the x-axis, use
the <code class="docutils literal notranslate"><span class="pre">value</span></code> column as the y-value and have different lines depending on the <code class="docutils literal notranslate"><span class="pre">source</span></code> column. In other words,
You’d have one line for ‘MaxTemp’ and another line for ‘AvgTemp’. In this example, the <code class="docutils literal notranslate"><span class="pre">source</span></code> column
contains the name of the line that the data belongs to.<br />
<img alt="Unpivoted Data" src="../_images/line_unpivoted_data.png" /></p>
<p>Here is code that shows how we can restructure the data from one format to the other.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.melt.html?highlight=dataframe%20melt#pandas.DataFrame.melt">df.melt</a></p></li>
<li><p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.pivot.html">df.pivot</a></p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df_unpivoted</span> <span class="o">=</span> <span class="n">df_pivoted</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">value_name</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="n">var_name</span><span class="o">=</span><span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">df_unpivoted</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># go back to the original pivoted format</span>
<span class="n">df_original</span> <span class="o">=</span> <span class="n">df_unpivoted</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;DATE&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./visualizations"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="geospatial.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Geospatial Plots</p>
      </div>
    </a>
    <a class="right-next"
       href="line_of_best_fit.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Curve of Best Fit</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#libraries">Libraries</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data">Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dataframe">DataFrame</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-plots">Simple Plots</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#twinx-plots">Twinx Plots</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#another-twinx-example">Another Twinx Example</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#seaborn">Seaborn</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jeff Stride
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <a href="https://idp.mrstride.com/acknowledgements.html">Acknowledgements</a>
</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>